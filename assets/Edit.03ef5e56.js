import{_ as x,Z as $,aa as S,a8 as V,a1 as l,a2 as m,ad as t,d as n,ah as _,ai as h,a5 as v,ae as y,ak as q}from"./index.56aced16.js";import{u as w}from"./index.62701558.js";import{c as b,r as g}from"./index.33746749.js";import{u as k,g as E,p as B,r as N}from"./generateHeaders.891fe619.js";import{s as M}from"./user.service.67c04b95.js";import{u as O}from"./auth_user_store.0a1df304.js";import"./axios.af9b5afd.js";$(O());const{getSettings:U}=$(k()),j={props:{school_head_details:[String,Object]},setup(){return{v$:w()}},data(){return{form:{first_name:null,last_name:null}}},validations(){return{form:{first_name:{required:b.withMessage("First name is required",g)},last_name:{required:b.withMessage("Last name is required",g)}}}},computed:{encryptionEnabled(){var e;return(e=U.value)==null?void 0:e.api_encryption_enabled}},mounted(){const e=this.school_head_details;for(let[s,r]of Object.entries(this.form))this.form[s]=e[s]||r},methods:{async update(){try{if(this.v$.$touch(),this.v$.$error){this.$refs.institution_course_details_expansion.show();return}let e={...this.form,id:this.$route.params.id};this.encryptionEnabled&&(e=S(JSON.stringify(e)));let r=(await this.$api.patch("/api/v1/school-heads/update/",e,{headers:{...E()}})).data;this.encryptionEnabled&&(r=JSON.parse(V(r)));const{message:a,success:i,results:d}=r;await M.fetchMe(),B({message:a}),this.$router.go(-1)}catch(e){N({caller:"update profile",error:e,api_encryption_enabled:this.api_encryption_enabled})}}}},C={class:"form-container"},F=t("div",{class:"text-center text-h6 q-mb-md"},"Schhol head profile ",-1),J={class:"q-pa-xs"},L=t("div",{class:"form-lable"},"First name *",-1),Q={key:0,class:"text-red"},A={class:"q-pa-xs"},D=t("div",{class:"form-lable"},"Last name *",-1),H={key:0,class:"text-red"},I={class:"flex justify-between q-mt-md"};function P(e,s,r,a,i,d){var p,u,c,f;return l(),m("div",C,[F,t("form",{onSubmit:s[3]||(s[3]=q((...o)=>d.update&&d.update(...o),["prevent"]))},[t("div",J,[L,n(_,{dense:"",outlined:"",modelValue:i.form.first_name,"onUpdate:modelValue":s[0]||(s[0]=o=>i.form.first_name=o)},null,8,["modelValue"]),(p=a.v$.form)!=null&&p.first_name.$error?(l(),m("div",Q,h((u=a.v$.form)==null?void 0:u.first_name.$errors[0].$message),1)):v("",!0)]),t("div",A,[D,n(_,{dense:"",outlined:"",modelValue:i.form.last_name,"onUpdate:modelValue":s[1]||(s[1]=o=>i.form.last_name=o)},null,8,["modelValue"]),(c=a.v$.form)!=null&&c.last_name.$error?(l(),m("div",H,h((f=a.v$.form)==null?void 0:f.last_name.$errors[0].$message),1)):v("",!0)]),t("div",I,[n(y,{outline:"",label:"Back",onClick:s[2]||(s[2]=o=>e.$router.go(-1)),"no-caps":"",style:{"min-width":"90px"}}),n(y,{outline:"",label:"Update",type:"submit","no-caps":"",style:{"min-width":"90px"}})])],32)])}var X=x(j,[["render",P]]);export{X as default};
