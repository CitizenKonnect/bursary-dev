import{_ as v,Z as h,a8 as g,a1 as c,a2 as r,ad as t,d as p,a3 as m,ae as u,b2 as b,F as x,b5 as k,ai as n,b3 as w,b4 as T}from"./index.bacfec48.js";import{b as S}from"./axios.a3b240ae.js";import{u as $,g as M}from"./generateHeaders.c61a8e24.js";import{_ as C}from"./arrow_back.cc0c166d.js";import{f as N}from"./index.e3cc403f.js";import"./auth_user_store.fb6dbab9.js";const{getSettings:V}=h($()),B={data(){return{response_data:"",all_docs:[],threads:[]}},computed:{encryptionEnabled(){var e;return(e=V.value)==null?void 0:e.api_encryption_enabled}},mounted(){this.fetchMany()},methods:{formateDateTime(e){if(!!e)return N(new Date(e),"yyy-MM-dd HH:mma")},async fetchMany(e={}){try{typeof this.cancelToken!="undefined"&&this.cancelToken.cancel("Operation canceled due to new request."),this.cancelToken=S.CancelToken.source();let o=(await this.$api.get("/api/v1/communications/threads/",{headers:{...M()},cancelToken:this.cancelToken.token,params:e})).data;this.encryptionEnabled&&(o=JSON.parse(g(o)));const{message:f,success:l,results:i}=o;this.response_data=i,this.all_docs=this.response_data.docs,this.threads=this.all_docs}catch{}}}},D=e=>(w("data-v-b5a6b81c"),e=e(),T(),e),I={class:"communications-list"},z={class:"q-my-md flex justify-between"},E=D(()=>t("img",{src:C,style:{width:"25px"}},null,-1)),F={class:""},H=["onClick"],q={class:"text-capitalize text-weight-bold"},O={class:"flex",style:{gap:"0px 20px"}},j={class:"text-capitalize"},A={class:"text-capitalize"},J={class:"timestamp"};function L(e,a,o,f,l,i){return c(),r("div",I,[t("div",z,[p(u,{flat:"",dense:"",onClick:a[0]||(a[0]=s=>e.$router.go(-1))},{default:m(()=>[E]),_:1}),p(u,{"no-caps":"",unelevated:"",outline:"",to:"/communications/create"},{default:m(()=>[b("New message")]),_:1})]),t("div",F,[(c(!0),r(x,null,k(l.threads,(s,y)=>{var d,_;return c(),r("div",{class:"thread-row",key:y,onClick:Q=>e.$router.push(`/communications/thread/${s.thread_id}`)},[t("div",q,n(s==null?void 0:s.title),1),t("div",O,[t("div",j,"From: "+n((d=s==null?void 0:s.from)==null?void 0:d.first_name),1),t("div",A," To: "+n((_=s==null?void 0:s.to)==null?void 0:_.first_name),1)]),t("div",J,n(i.formateDateTime(s==null?void 0:s.createdAt)),1)],8,H)}),128))])])}var W=v(B,[["render",L],["__scopeId","data-v-b5a6b81c"]]);export{W as default};
