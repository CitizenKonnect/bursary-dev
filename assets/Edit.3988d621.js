import{_ as q,Z as k,a8 as g,aa as E,a1 as w,a2 as N,ad as s,ai as r,d as a,aM as l,ak as V,ae as x,b3 as B,b4 as z}from"./index.56aced16.js";import{Q as I}from"./QSelect.1fc42082.js";import{u as Q}from"./index.62701558.js";import{u as D,g as S,p as J,r as O}from"./generateHeaders.891fe619.js";import{u as U}from"./auth_user_store.0a1df304.js";import"./QItemLabel.cffd16e9.js";import"./QMenu.58a91336.js";import"./position-engine.9dfbd25a.js";import"./selection.e4c60947.js";import"./format.a33550d6.js";import"./axios.af9b5afd.js";k(U());const{getSettings:$}=k(D()),M={setup(){return{v$:Q()}},data(){return{form:{status:null},details:""}},computed:{encryptionEnabled(){var e;return(e=$.value)==null?void 0:e.api_encryption_enabled},statuses(){return["active","inactive"]}},mounted(){this.fetchDetails()},methods:{async fetchDetails(e={}){try{e={id:this.$route.params.id};let o=(await this.$api.get("/api/v1/admin/school-heads/details/",{headers:{...S()},params:e})).data;this.encryptionEnabled&&(o=JSON.parse(g(o)));const{message:p,success:t,results:n}=o;this.details=n}catch{}},async submit(){try{if(this.v$.$touch(),this.v$.$error)return;let e={...this.form};e.id=this.details.id,this.encryptionEnabled&&(e=E(JSON.stringify(e)));let o=(await this.$api.patch("/api/v1/admin/school-heads/update/",e,{headers:{...S()}})).data;this.encryptionEnabled&&(o=JSON.parse(g(o)));const{message:p,success:t,results:n}=o;J({message:p})}catch(e){console.log("error submitting school details ",e),O({caller:"update school head details by admin",error:e,api_encryption_enabled:this.encryptionEnabled})}}}},d=e=>(B("data-v-50e207a4"),e=e(),z(),e),P={class:"main-page-height flex flex-center"},j={class:"form-container"},A=d(()=>s("div",{class:"text-h6 text-center"},"Update school head",-1)),C={class:"row"},F={class:"col-md col-xs-12 q-pa-md"},H={class:"details-key-pair q-my-md"},L=d(()=>s("div",{class:""},"First name:",-1)),R={class:"text-capitalize"},T={class:"details-key-pair q-my-md"},Z=d(()=>s("div",{class:""},"Phone number:",-1)),G={class:"text-capitalize"},K={class:"details-key-pair q-my-md"},W=d(()=>s("div",{class:""},"Name:",-1)),X={class:"text-capitalize"},Y={class:"col-md col-xs-12 q-pa-md"},ss={class:"details-key-pair q-my-md"},es=d(()=>s("div",{class:""},"Last name:",-1)),ts={class:"text-capitalize"},as={class:"details-key-pair q-my-md no-wrap"},is=d(()=>s("div",{class:""},"Email:",-1)),os={class:""},ds={class:"details-key-pair q-my-md"},ls=d(()=>s("div",{class:""},"Serial number:",-1)),ns={class:""},rs={class:"q-my-xs"},cs=d(()=>s("div",{class:"form-lable"},"Status",-1)),ps={class:"flex justify-between q-mt-lg"};function _s(e,i,o,p,t,n){var _,m,h,u,v,f,y,b;return w(),N("div",P,[s("div",j,[A,s("div",C,[s("div",F,[s("div",H,[L,s("div",R,r((_=t.details)==null?void 0:_.first_name),1)]),a(l),s("div",T,[Z,s("div",G,r((m=t.details)==null?void 0:m.phone_number),1)]),a(l),s("div",K,[W,s("div",X,r((u=(h=t.details)==null?void 0:h.school_details)==null?void 0:u.name_of_school),1)]),a(l)]),a(l,{vertical:"",inset:""}),s("div",Y,[s("div",ss,[es,s("div",ts,r((v=t.details)==null?void 0:v.last_name),1)]),a(l),s("div",as,[is,s("div",os,r((f=t.details)==null?void 0:f.email),1)]),a(l),s("div",ds,[ls,s("div",ns,r((b=(y=t.details)==null?void 0:y.school_details)==null?void 0:b.school_serial_number),1)]),a(l)])]),s("form",{onSubmit:i[2]||(i[2]=V((...c)=>n.submit&&n.submit(...c),["prevent"])),class:"q-pa-md"},[s("div",rs,[cs,a(I,{dense:"",outlined:"",modelValue:t.form.status,"onUpdate:modelValue":i[0]||(i[0]=c=>t.form.status=c),options:n.statuses,"popup-content-class":"selection-options"},null,8,["modelValue","options"])]),s("div",ps,[a(x,{outline:"",label:"Back",onClick:i[1]||(i[1]=c=>e.$router.go(-1)),"no-caps":"",style:{"min-width":"100px"}}),a(x,{unelevated:"",color:"primary",label:"Submit",type:"submit","no-caps":"",style:{"min-width":"100px"}})])],32)])])}var qs=q(M,[["render",_s],["__scopeId","data-v-50e207a4"]]);export{qs as default};
