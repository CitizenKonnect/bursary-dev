import{_ as O,Z as F,$ as E,a6 as S,a8 as V,aa as J,a0 as N,a1 as k,a2 as q,ad as t,ai as o,d as l,a3 as c,b2 as r,ae as d,a5 as R,J as U}from"./index.58c24f9b.js";import{C as j}from"./ClosePopup.b85f347e.js";import{u as H,g as B,p as I,r as M}from"./generateHeaders.1afc8456.js";import"./auth_user_store.67764a02.js";import{f as Q}from"./index.e3cc403f.js";import"./axios.5abb35e7.js";const{getSettings:Z}=F(H()),G={data(){return{application_details:"",status:"",show_confirm_update_status_dialog:!1,content:""}},computed:{encryptionEnabled(){var e;return(e=Z.value)==null?void 0:e.api_encryption_enabled}},components:{PDFViewer:E(()=>S(()=>import("./PDFViewer.32035884.js"),["assets/PDFViewer.32035884.js","assets/index.58c24f9b.js","assets/index.93ddf4f0.css","assets/vue3-pdf-embed.88b21ee3.js","assets/generateHeaders.1afc8456.js","assets/auth_user_store.67764a02.js","assets/axios.5abb35e7.js"])),PopupDialog:E(()=>S(()=>import("./PopupDialog.bc1cdc3e.js"),["assets/PopupDialog.bc1cdc3e.js","assets/index.58c24f9b.js","assets/index.93ddf4f0.css"]))},mounted(){this.fetchApplicationDetails()},methods:{formateDateTime(e){if(!!e)return Q(new Date(e),"yyy-MM-dd HH:mma")},async fetchApplicationDetails(){try{const e={id:this.$route.params.id};let n=(await this.$api.get("/api/v1/admin/students/bursary-application/",{headers:{...B()},params:e})).data;this.encryptionEnabled&&(n=JSON.parse(V(n)));const{message:_,success:s,results:i}=n;console.log("bursary application details ====== ",i),this.application_details=i}catch{}},handleApplicationStatusUpdate(e){this.status=e,e==="approved"&&(this.content="Are you sure you want to confirm approval of bursary application"),e==="rejected"&&(this.content="Are you sure you want reject bursary application"),e==="pending"&&(this.content="Are you sure you want set status to pending for bursary application"),this.show_confirm_update_status_dialog=!0},async updateBursaryApplication(){try{let e={status:this.status,application_id:this.$route.params.id};this.encryptionEnabled&&(e=J(JSON.stringify(e)));let n=(await this.$api.patch("/api/v1/admin/students/bursary-application/update/",e,{headers:{...B()}})).data;this.encryptionEnabled&&(n=JSON.parse(V(n)));const{message:_,success:s,results:i}=n;I({message:_})}catch(e){M({caller:"Login form",error:e,api_encryption_enabled:this.api_encryption_enabled})}}}},K={class:"view-details"},W={class:"q-my-sm flex justify-between"},X={class:""},Y={class:"details-container"},$=t("div",{class:"text-capitalize text-weight-bold"},"First name:",-1),tt={class:"text-capitalize"},et={class:"details-container"},st=t("div",{class:"text-capitalize text-weight-bold"},"Last name",-1),at={class:"text-capitalize"},it={class:"details-container"},ot=t("div",{class:"text-capitalize text-weight-bold"},"Phone number:",-1),nt={class:"text-capitalize"},lt={class:"details-container"},ct=t("div",{class:"text-capitalize text-weight-bold"},"Email:",-1),dt={class:""},pt={class:"details-container"},rt=t("div",{class:"text-capitalize text-weight-bold"},"Date time:",-1),_t={class:""},ut={class:"details-container"},ht=t("div",{class:"text-capitalize text-weight-bold"},"Location:",-1),mt={class:"text-capitalize"},vt={class:"details-container"},ft=t("div",{class:"text-capitalize text-weight-bold"},"Polling center:",-1),yt={class:"text-capitalize"},xt={class:""},gt={class:"flex text-weight-bold",style:{gap:"0px 10px"}},bt=t("div",{class:"text-capitalize"},"Status:",-1),wt={class:"text-capitalize"},At={class:"q-my-sm"},Dt=t("div",{class:"text-subtitle1 q-my-sm"},"Update bursary application status",-1),zt={class:"flex",style:{gap:"0px 10px"}},Pt={key:0,class:"q-my-sm"},Ct=t("div",null," Update bursary application ",-1),Et={class:"flex justify-between"};function St(e,a,n,_,s,i){var u,h,m,v,f,y,x,g,b,w,A,D,z,P,C;const T=N("PDFViewer"),L=N("PopupDialog");return k(),q("div",K,[t("div",W,[t("div",X,[t("div",Y,[$,t("div",tt,o((h=(u=s.application_details)==null?void 0:u.user)==null?void 0:h.first_name),1)]),t("div",et,[st,t("div",at,o((v=(m=s.application_details)==null?void 0:m.user)==null?void 0:v.last_name),1)]),t("div",it,[ot,t("div",nt,o((y=(f=s.application_details)==null?void 0:f.user)==null?void 0:y.phone_number),1)]),t("div",lt,[ct,t("div",dt,o(((g=(x=s.application_details)==null?void 0:x.user)==null?void 0:g.email)||"N/A"),1)]),t("div",pt,[rt,t("div",_t,o(i.formateDateTime((b=s.application_details)==null?void 0:b.timestamp)||"N/A"),1)]),t("div",ut,[ht,t("div",mt,o((A=(w=s.application_details)==null?void 0:w.student)==null?void 0:A.location),1)]),t("div",vt,[ft,t("div",yt,o((z=(D=s.application_details)==null?void 0:D.student)==null?void 0:z.polling_center),1)])]),t("div",xt,[t("div",gt,[bt,t("div",wt,o((P=s.application_details)==null?void 0:P.status),1)]),t("div",At,[Dt,t("div",zt,[l(d,{dense:"",color:"green",class:"q-px-md",unelevated:"","no-caps":"",onClick:a[0]||(a[0]=p=>i.handleApplicationStatusUpdate("approved"))},{default:c(()=>[r("Approve")]),_:1}),l(d,{dense:"",color:"orange",class:"q-px-md",unelevated:"","no-caps":"",onClick:a[1]||(a[1]=p=>i.handleApplicationStatusUpdate("pending"))},{default:c(()=>[r("Pending")]),_:1}),l(d,{dense:"",color:"red",class:"q-px-md",unelevated:"","no-caps":"",onClick:a[2]||(a[2]=p=>i.handleApplicationStatusUpdate("rejected"))},{default:c(()=>[r("Reject")]),_:1})])])])]),s.application_details?(k(),q("div",Pt,[l(T,{file_path:(C=s.application_details)==null?void 0:C.file_path},null,8,["file_path"])])):R("",!0),l(L,{modelValue:s.show_confirm_update_status_dialog,"onUpdate:modelValue":a[3]||(a[3]=p=>s.show_confirm_update_status_dialog=p)},{title:c(()=>[Ct]),content:c(()=>[r(o(s.content),1)]),actions:c(()=>[t("div",Et,[U(l(d,{unelevated:"","no-caps":"",label:"Cancel",outline:"",color:"red"},null,512),[[j]]),U(l(d,{unelevated:"","no-caps":"",label:"Confirm",color:"primary",onClick:i.updateBursaryApplication},null,8,["onClick"]),[[j]])])]),_:1},8,["modelValue"])])}var Bt=O(G,[["render",St]]);export{Bt as default};
