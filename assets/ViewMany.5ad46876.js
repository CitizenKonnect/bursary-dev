import{_ as k,Z as S,a8 as T,a1 as p,a2 as f,ad as s,d as c,ah as N,a3 as _,b2 as h,ae as u,ai as l,J as y,af as b,as as w,F as A,b5 as C,b3 as D,b4 as V}from"./index.56aced16.js";import{Q as M}from"./QTooltip.0e0f570b.js";import{b as I}from"./axios.af9b5afd.js";import{u as P,g as z}from"./generateHeaders.891fe619.js";import{f as L}from"./index.e3cc403f.js";import"./position-engine.9dfbd25a.js";import"./selection.e4c60947.js";import"./auth_user_store.0a1df304.js";const{getSettings:Q}=S(P()),q={data(){return{response_data:"",all_docs:[],table_docs:[],search_term:"",cancelToken:void 0,sort_ASC:!0}},computed:{encryptionEnabled(){var t;return(t=Q.value)==null?void 0:t.api_encryption_enabled},resumes(){return this.table_docs.map(t=>({...t.user,...t}))}},mounted(){this.fetchMany(),this.setupPagination()},methods:{formateDateTime(t){if(!!t)return L(new Date(t),"yyy-MM-dd HH:mma")},async fetchMany(t={}){try{typeof this.cancelToken!="undefined"&&this.cancelToken.cancel("Operation canceled due to new request."),this.cancelToken=I.CancelToken.source();let o=(await this.$api.get("/api/v1/admin/resumes/",{headers:{...z()},cancelToken:this.cancelToken.token,params:t})).data;this.encryptionEnabled&&(o=JSON.parse(T(o)));const{message:d,success:i,results:n}=o;this.response_data=n,this.all_docs=this.response_data.docs,this.table_docs=this.all_docs}catch{}},setupPagination(){const t=document.querySelector(".trigger");new IntersectionObserver(([o])=>{var d;!this.response_data||o.isIntersecting&&this.fetchNext((d=this.response_data)==null?void 0:d.nextPage)},{root:null,threshold:0}).observe(t)},fetchNext(t){!this.response_data.nextPage||this.response_data.page>=t||this.fetchMany({page:t,size:this.response_data.limit,search_term:this.search_term})},filterData(t){t=t.trim(),this.fetchMany({search_term:t})},sortList(t){this.sort_ASC?(this.table_docs.sort((a,o)=>a[t]>o[t]?-1:1),this.sort_ASC=!1):(this.table_docs.sort((a,o)=>a[t]<o[t]?-1:1),this.sort_ASC=!0)}}},r=t=>(D("data-v-b1944b16"),t=t(),V(),t),B={class:""},F={class:"flex justify-between q-my-sm data-table-top"},E={class:"flex",style:{gap:"5px"}},H={class:"flex",style:{gap:"0px 5px"}},O={class:"q-px-sm text-grey text-h6"},R={class:""},j=r(()=>s("th",{scope:"col"},"First name",-1)),J=r(()=>s("th",{scope:"col"},"Last name",-1)),U=r(()=>s("th",{scope:"col"},"Phone number",-1)),Z=r(()=>s("th",{scope:"col"},"Type",-1)),G={scope:"col"},K=r(()=>s("th",{scope:"col"},"Actions",-1)),W={"data-label":"First name",class:"text-capitalize"},X={"data-label":"Last name",class:"text-capitalize"},Y={"data-label":"Phone number",class:"text-capitalize"},$={"data-label":"Type",class:"text-capitalize"},tt={"data-label":"Date"},et={"data-label":"Action"},st={class:"flex justify-center items-center",style:{gap:"5px"}},at=r(()=>s("span",{class:"trigger"},null,-1)),ot=r(()=>s("div",{class:"text-left"},"No Resumes",-1)),nt=[ot];function it(t,a,o,d,i,n){var g,x,m;return p(),f("div",B,[s("div",F,[s("div",E,[c(N,{modelValue:i.search_term,"onUpdate:modelValue":[a[0]||(a[0]=e=>i.search_term=e),n.filterData],placeholder:"search",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"]),c(u,{outline:"",color:"grey-5",dense:"",icon:"refresh",onClick:n.fetchMany},{default:_(()=>[c(M,null,{default:_(()=>[h(" Refresh ")]),_:1})]),_:1},8,["onClick"])]),s("div",H,[s("span",O,l((g=i.all_docs)==null?void 0:g.length)+" of "+l((x=i.response_data)==null?void 0:x.totalDocs),1),y(c(u,{outline:"",outlined:"",color:"grey-5",onClick:a[1]||(a[1]=e=>{var v;return n.fetchNext((v=i.response_data)==null?void 0:v.nextPage)}),"no-caps":""},{default:_(()=>[h("Next")]),_:1},512),[[b,(m=i.response_data)==null?void 0:m.nextPage]])])]),s("table",R,[s("thead",null,[s("tr",null,[j,J,U,Z,s("th",G,[s("div",{class:"sortable-table-head",onClick:a[2]||(a[2]=e=>n.sortList("createdAt"))},[h(" Date "),c(w,{name:"arrow_downward"}),c(w,{name:"arrow_upward"})])]),K])]),y(s("tbody",null,[(p(!0),f(A,null,C(n.resumes,e=>(p(),f("tr",{key:e==null?void 0:e.id},[s("td",W,l((e==null?void 0:e.first_name)||"N/A"),1),s("td",X,l(e==null?void 0:e.last_name),1),s("td",Y,l((e==null?void 0:e.phone_number)||"N/A"),1),s("td",$,l(e==null?void 0:e.opportunity_type),1),s("td",tt,l(n.formateDateTime(e==null?void 0:e.createdAt)||"N/A"),1),s("td",et,[s("div",st,[c(u,{unelevated:"","no-caps":"",dense:"",color:"orange",style:{"min-width":"60px"},to:`/resumes/view/${e==null?void 0:e.id}`},{default:_(()=>[h("View")]),_:2},1032,["to"])])])]))),128))],512),[[b,n.resumes]]),at,y(s("div",null,nt,512),[[b,!i.table_docs.length]])])])}var ut=k(q,[["render",it],["__scopeId","data-v-b1944b16"]]);export{ut as default};
