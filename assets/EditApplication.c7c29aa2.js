import{_ as B,Z as D,$ as x,a6 as w,a0 as g,a1 as k,a2 as C,ad as e,d as r,ae as c,ai as d,a3 as _,b2 as F,J as V,af as A,a5 as E,b3 as U,b4 as I}from"./index.58c24f9b.js";import{g as S}from"./generateHeaders.1afc8456.js";import{u as M}from"./auth_user_store.67764a02.js";import"./axios.5abb35e7.js";const{getMe:P}=D(M()),T={props:{bursary_applications:Array},data(){return{bursary_form:null,application_to_edit:null}},computed:{getMe(){return P.value}},components:{Uploader:x(()=>w(()=>import("./Uploader.97aeefb6.js"),["assets/Uploader.97aeefb6.js","assets/index.58c24f9b.js","assets/index.93ddf4f0.css"])),PDFViewer:x(()=>w(()=>import("./PDFViewer.32035884.js"),["assets/PDFViewer.32035884.js","assets/index.58c24f9b.js","assets/index.93ddf4f0.css","assets/vue3-pdf-embed.88b21ee3.js","assets/generateHeaders.1afc8456.js","assets/auth_user_store.67764a02.js","assets/axios.5abb35e7.js"]))},mounted(){this.application_to_edit=this.bursary_applications.find(t=>t.id===this.$route.params.id)},methods:{handleUploadedFile(t){this.bursary_form=t},async downloadBursaryForm(){try{const t={},s=await this.$api.get("/api/v1/bursaries/students/form/",{headers:{...S()},params:t,responseType:"blob"});let l=s.data;console.log(s.headers," response bursary-form headers ",s.headers.get("file-name"));const n=new Blob([l],{type:s.headers.get("content-type")}),o=document.createElement("a");return o.href=window.URL.createObjectURL(n),o.download=s.headers["file-name"],o.click(),!0}catch{return null}},async submitBursaryForm(){var t;try{const s=new FormData;s.append("application_id",this.$route.params.id),s.append("bursary_form",this.bursary_form.file);let n=(await this.$api.post("/api/v1/bursaries/students/update/",s,{headers:{...S(),"Content-Type":"multipart/form-data"}})).data;const{message:o,success:i,results:p}=n;(t=this.$refs)==null||t.file_selector.clearSelectedFile()}catch{}}}},a=t=>(U("data-v-75e7be8a"),t=t(),I(),t),L={class:"form-container"},R={class:"flex justify-between"},j={class:""},z=a(()=>e("div",{class:"text-center text-h6 q-mb-md"},"Bursary application",-1)),N=a(()=>e("div",{class:"text-weight-bold q-mb-md"},"Student details",-1)),O={class:"q-mt-md"},$={class:"flex",style:{gap:"0px 20px"}},H=a(()=>e("div",{class:""},"First name:",-1)),J={class:"text-capitalize"},Q={class:"flex",style:{gap:"0px 20px"}},Z=a(()=>e("div",{class:""},"Last name:",-1)),G={class:"text-capitalize"},K={class:"flex",style:{gap:"0px 20px"}},W=a(()=>e("div",{class:""},"Institution:",-1)),X={class:"text-capitalize"},Y={class:"flex",style:{gap:"0px 20px"}},ee=a(()=>e("div",{class:""},"Course:",-1)),te={class:"text-capitalize"},se=a(()=>e("div",{class:"text-center text-weight-bold q-mb-md"},"Application form",-1)),ae=a(()=>e("div",{class:"q-mt-md"}," Click the download button below to download the form after which you need to fill the form as required, scan it and upload it by clicking the upload button ",-1)),oe={class:"q-my-md flex justify-between"},ie=a(()=>e("span",{class:"q-px-xs"},"Select filled form",-1)),re={class:"flex justify-center q-my-sm"},ne={key:0,class:"q-my-sm"};function de(t,s,l,n,o,i){var u,m,f,h,v,y,b;const p=g("Uploader"),q=g("PDFViewer");return k(),C("div",null,[e("div",L,[e("div",R,[e("div",j,[r(c,{dense:"",flat:"",icon:"arrow_back_ios",onClick:s[0]||(s[0]=le=>t.$router.go(-1))})])]),z,N,e("div",O,[e("div",$,[H,e("div",J,d((u=i.getMe)==null?void 0:u.first_name),1)]),e("div",Q,[Z,e("div",G,d((m=i.getMe)==null?void 0:m.last_name),1)]),e("div",K,[W,e("div",X,d((h=(f=i.getMe)==null?void 0:f.student_details)==null?void 0:h.institution),1)]),e("div",Y,[ee,e("div",te,d((y=(v=i.getMe)==null?void 0:v.student_details)==null?void 0:y.course),1)])]),se,ae,e("div",oe,[r(c,{unelevated:"",outline:"",color:"green",class:"download-form-btn","no-caps":"",onClick:i.downloadBursaryForm},{default:_(()=>[F("Download form")]),_:1},8,["onClick"]),r(p,{onSelected_file_emitted_event:i.handleUploadedFile,file_types:["application/pdf"],ref:"file_selector"},{default:_(()=>[ie]),_:1},8,["onSelected_file_emitted_event"])]),V(e("div",re,[r(c,{color:"green",unelevated:"","no-caps":"",onClick:i.submitBursaryForm},{default:_(()=>[F("Submit")]),_:1},8,["onClick"])],512),[[A,o.bursary_form]]),o.application_to_edit?(k(),C("div",ne,[r(q,{file_path:(b=o.application_to_edit)==null?void 0:b.file_path},null,8,["file_path"])])):E("",!0)])])}var me=B(T,[["render",de],["__scopeId","data-v-75e7be8a"]]);export{me as default};
