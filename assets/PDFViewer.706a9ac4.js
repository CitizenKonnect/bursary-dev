import{_ as g,a0 as h,a1 as p,a2 as r,ad as t,ai as i,b2 as u,d as _,aj as m}from"./index.bacfec48.js";import{V as f}from"./vue3-pdf-embed.89cb2843.js";import{g as b}from"./generateHeaders.c61a8e24.js";import"./auth_user_store.fb6dbab9.js";import"./axios.a3b240ae.js";const w={props:{file_path:String},data(){return{pdf_source:"",scale:2,page:1,pageCount:1,show_all_pages:!1}},components:{VuePdfEmbed:f},mounted(){this.viewUploadedDocument()},methods:{handleDocumentRender(s){console.log(s),this.isLoading=!1,this.pageCount=this.$refs.pdfRef.pageCount},handleToggleShowAll(s){this.page=s?null:1},async viewUploadedDocument(){try{const s={file_path:this.file_path},o=await this.$api.get("/api/v1/uploads/",{headers:{...b()},params:s,responseType:"blob"});let c=o.data;const d=new Blob([c],{type:o.headers.get("content-type")}),e=document.createElement("a");let l=await new Promise(n=>{let a=new FileReader;a.onload=n,a.readAsDataURL(d)}).then(n=>n.target.result);this.pdf_source=l,e.href=window.URL.createObjectURL(d)}catch(s){console.log("error fetching uploaded document ",s)}}}},v={class:"flex justify-between q-pa-md"},C={class:""},R={key:0},V={key:1},y=["disabled"],k=["disabled"],U={class:""},D={class:"pdf-view-container"};function x(s,o,c,d,e,l){const n=h("vue-pdf-embed");return p(),r("div",null,[t("div",v,[t("div",C,[e.show_all_pages?(p(),r("span",R,i(e.pageCount)+" page(s) ",1)):(p(),r("span",V,[t("button",{disabled:e.page<=1,onClick:o[0]||(o[0]=a=>e.page--)},"\u276E",8,y),u(" "+i(e.page)+" / "+i(e.pageCount)+" ",1),t("button",{disabled:e.page>=e.pageCount,onClick:o[1]||(o[1]=a=>e.page++)},"\u276F",8,k)]))]),t("div",U,[t("label",null,[_(m,{modelValue:e.show_all_pages,"onUpdate:modelValue":[o[2]||(o[2]=a=>e.show_all_pages=a),l.handleToggleShowAll]},null,8,["modelValue","onUpdate:modelValue"]),u(" Show all ")])])]),t("div",D,[_(n,{ref:"pdfRef",source:e.pdf_source,page:e.page,scale:e.scale,onRendered:l.handleDocumentRender},null,8,["source","page","scale","onRendered"])])])}var A=g(w,[["render",x]]);export{A as default};
