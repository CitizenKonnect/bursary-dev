import{a7 as l,a8 as p,a9 as f,Z as g}from"./index.bacfec48.js";import{u as m}from"./auth_user_store.fb6dbab9.js";import{a as y}from"./axios.a3b240ae.js";async function i({message:e,time:t,position:r,closeBtn:s,color:o,multiLine:a}){await l.create({icon:"",position:r||"top-right",message:`${e}`,closeBtn:s||!1,timeout:typeof t=="number"?t:3500,badgeStyle:"opacity: 0",color:o||"red",multiLine:a||!1,html:!0})}async function A({message:e,time:t,position:r,closeBtn:s,color:o,multiLine:a}){await l.create({icon:"",position:r||"top-right",message:`${e}`,closeBtn:s||!1,timeout:typeof t=="number"?t:3500,badgeStyle:"opacity: 0",color:o||"secondary",multiLine:a||!1,html:!0})}var h=({caller:e,error:t,api_encryption_enabled:r})=>{var a;const s=(a=t.response)==null?void 0:a.headers["content-type"],{response:o}=t;if(o){let n=o.data;(r||s.includes("plain"))&&(n=JSON.parse(p(n)));const{validation_errors:d,user_error_message:c}=n;return d?v(n):(S(n),c||void 0)}i({message:t.message,time:5e3,closeBtn:!0,position:"top",color:"red"})};const S=e=>{const{message:t}=e;i({message:t,time:5e3,closeBtn:!0,position:"top",color:"red"})},v=e=>{const{errors:t}=e;let r="";t.forEach(s=>{const o=Object.values(s);o.length&&(r=r+o[0]+"<br>")}),i({message:r,time:5e3,closeBtn:!0,position:"top",color:"red"})},u=f("settings_store",{state:()=>({settings:"Settings",models:""}),getters:{getSettings:e=>e.settings,getModels:e=>e.models},actions:{async fetchSettings(){try{let e=await y.get("/api/v1/settings/");e=p(e.data);const{results:t}=JSON.parse(e);this.settings=t.settings,this.models=t.models}catch(e){h({caller:"fetchSettings",error:e})}}}});u();const{getSettings:_}=g(u()),{getAuthUserDetails:b}=g(m());var B=()=>{var o;const e=(o=_.value)==null?void 0:o.api_encryption_enabled,t=b.value||"",r=t.token?{authorization:t.token}:{};let s="text/plain";return e||(s="application/json"),{"Content-Type":s,Accept:s,type:"web_application",...r}};export{B as g,A as p,h as r,u};
